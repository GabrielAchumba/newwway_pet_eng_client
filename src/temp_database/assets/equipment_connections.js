const equipmentConnections2 =  [
      {
        "node1": "ABU_FS1",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF_Gas",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "ABU_FS3",
        "node2": "Oil_Pipeline_1",
        "node3": "Oil_Pipeline_1",
        "node4": "Oil_Pipeline_1",
        "node5": "Oil_Pipeline_1",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS3",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF_Gas",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "ABU_FS4",
        "node2": "Oil_Pipeline_1",
        "node3": "Oil_Pipeline_1",
        "node4": "Oil_Pipeline_1",
        "node5": "Oil_Pipeline_1",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS4",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF_Gas",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "ABU_FS5",
        "node2": "Oil_Pipeline_1",
        "node3": "Oil_Pipeline_1",
        "node4": "Oil_Pipeline_1",
        "node5": "Oil_Pipeline_1",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS5",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF_Gas",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "ABU_FS2",
        "node2": "REO_CPF_Liquid",
        "node3": "Oil_Pipeline_1",
        "node4": "Oil_Pipeline_1",
        "node5": "Oil_Pipeline_1",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS2",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF_Gas",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "REO_GP1",
        "node2": "REO_CPF_Liquid",
        "node3": "Oil_Pipeline_1",
        "node4": "Oil_Pipeline_1",
        "node5": "Oil_Pipeline_1",
        "node6": "FCOT"
      },
      {
        "node1": "REO_GP1",
        "node2": "REO_CPF_NAG",
        "node3": "REO_CPF_Gas",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "REO_GP3",
        "node2": "Oil_Pipeline_1",
        "node3": "Oil_Pipeline_1",
        "node4": "Oil_Pipeline_1",
        "node5": "Oil_Pipeline_1",
        "node6": "FCOT"
      },
      {
        "node1": "REO_GP3",
        "node2": "Gas_Pipeline_1",
        "node3": "Gas_Pipeline_2",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Pipeline_2",
        "node6": "Gas_Customer_1"
      },
      {
        "node1": "REO_GP2",
        "node2": "Oil_Pipeline_2",
        "node3": "Oil_Pipeline_2",
        "node4": "Oil_Pipeline_2",
        "node5": "Oil_Pipeline_2",
        "node6": "FCOT"
      },
      {
        "node1": "REO_GP2",
        "node2": "Dehydration_Unit",
        "node3": "Gas_Pipeline_2a",
        "node4": "Gas_Pipeline_2a",
        "node5": "Gas_Pipeline_2a",
        "node6": "Gas_Customer_2"
      },
      {
        "node1": "ABU_FS6",
        "node2": "REO_ABU_CPF_1_Liquid",
        "node3": "Oil_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Oil_Pipeline_5",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS6",
        "node2": "REO_ABU_CPF_1_Gas",
        "node3": "Gas_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Gas_Pipeline_5",
        "node6": "Gas_Customer_2"
      },
      {
        "node1": "REO_GP4",
        "node2": "REO_ABU_CPF_1_Liquid",
        "node3": "Oil_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Oil_Pipeline_5",
        "node6": "FCOT"
      },
      {
        "node1": "REO_GP4",
        "node2": "REO_ABU_CPF_1_Gas",
        "node3": "Gas_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Gas_Pipeline_5",
        "node6": "Gas_Customer_2"
      },
      {
        "node1": "ABU_FS7",
        "node2": "Oil_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Oil_Pipeline_5",
        "node5": "Oil_Pipeline_5",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS7",
        "node2": "Gas_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Gas_Pipeline_5",
        "node5": "Gas_Pipeline_5",
        "node6": "Gas_Customer_2"
      },
      {
        "node1": "REO_GP5",
        "node2": "Oil_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Oil_Pipeline_5",
        "node5": "Oil_Pipeline_5",
        "node6": "FCOT"
      },
      {
        "node1": "REO_GP5",
        "node2": "Gas_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Gas_Pipeline_5",
        "node5": "Gas_Pipeline_5",
        "node6": "Gas_Customer_2"
      }
    ];


const equipmentConnections = [
      {
        "node1": "ABU_FS1",
        "node2": "Oil_Pipeline_1",
        "node3": "FCOT",
        "node4": "",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "ABU_FS1",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Customer_1",
        "node6": ""
      },
      {
        "node1": "ABU_FS3",
        "node2": "Oil_Pipeline_1",
        "node3": "FCOT",
        "node4": "",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "ABU_FS3",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Customer_1",
        "node6": ""
      },
      {
        "node1": "ABU_FS4",
        "node2": "Oil_Pipeline_1",
        "node3": "FCOT",
        "node4": "",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "ABU_FS4",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Customer_1",
        "node6": ""
      },
      {
        "node1": "ABU_FS5",
        "node2": "Oil_Pipeline_1",
        "node3": "FCOT",
        "node4": "",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "ABU_FS5",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Customer_1",
        "node6": ""
      },
      {
        "node1": "ABU_FS2",
        "node2": "REO_CPF",
        "node3": "Oil_Pipeline_1",
        "node4": "FCOT",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "ABU_FS2",
        "node2": "REO_CPF_AGG",
        "node3": "REO_CPF",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Customer_1",
        "node6": ""
      },
      {
        "node1": "REO_GP1",
        "node2": "REO_CPF",
        "node3": "Oil_Pipeline_1",
        "node4": "FCOT",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "REO_GP1",
        "node2": "REO_CPF_NAG",
        "node3": "REO_CPF",
        "node4": "Gas_Pipeline_2",
        "node5": "Gas_Customer_1",
        "node6": ""
      },
      {
        "node1": "REO_GP3",
        "node2": "Oil_Pipeline_1",
        "node3": "FCOT",
        "node4": "",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "REO_GP3",
        "node2": "Gas_Pipeline_1",
        "node3": "Gas_Pipeline_2",
        "node4": "Gas_Customer_1",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "REO_GP2",
        "node2": "Oil_Pipeline_2",
        "node3": "FCOT",
        "node4": "",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "REO_GP2",
        "node2": "Dehydration_Unit",
        "node3": "Gas_Pipeline_2a",
        "node4": "Gas_Customer_2",
        "node5": "",
        "node6": ""
      },
      {
        "node1": "ABU_FS6",
        "node2": "REO_ABU_CPF_1",
        "node3": "Oil_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Oil_Pipeline_5",
        "node6": "FCOT"
      },
      {
        "node1": "ABU_FS6",
        "node2": "REO_ABU_CPF_1",
        "node3": "Gas_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Gas_Pipeline_5",
        "node6": "Gas_Customer_2"
      },
      {
        "node1": "REO_GP4",
        "node2": "REO_ABU_CPF_1",
        "node3": "Oil_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Oil_Pipeline_5",
        "node6": "FCOT"
      },
      {
        "node1": "REO_GP4",
        "node2": "REO_ABU_CPF_1",
        "node3": "Gas_Pipeline_3",
        "node4": "REO_ABU_CPF_1_&_2",
        "node5": "Gas_Pipeline_5",
        "node6": "Gas_Customer_2"
      },
      {
        "node1": "ABU_FS7",
        "node2": "Oil_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Oil_Pipeline_5",
        "node5": "FCOT",
        "node6": ""
      },
      {
        "node1": "ABU_FS7",
        "node2": "Gas_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Gas_Pipeline_5",
        "node5": "Gas_Customer_2",
        "node6": ""
      },
      {
        "node1": "REO_GP5",
        "node2": "Oil_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Oil_Pipeline_5",
        "node5": "FCOT",
        "node6": ""
      },
      {
        "node1": "REO_GP5",
        "node2": "Gas_Pipeline_4",
        "node3": "REO_ABU_CPF_1_&_2",
        "node4": "Gas_Pipeline_5",
        "node5": "Gas_Customer_2",
        "node6": ""
      }
    ];

const CentralProcessingFacility = 'https://cdn-icons-png.flaticon.com/512/3342/3342135.png';
const DehydrationUnit = 'https://cdn-icons-png.flaticon.com/512/3342/3342137.png';
const DrainagePoint = 'https://cdn-icons-png.flaticon.com/512/1583/1583079.png';
const Flowstation = 'https://cdn-icons-png.flaticon.com/512/3342/3342132.png';
const GasDemand = 'https://cdn-icons-png.flaticon.com/512/3342/3342138.png';
const GasProcessingFacility = 'https://cdn-icons-png.flaticon.com/512/3342/3342135.png';
const Pipeline = 'https://cdn-icons-png.flaticon.com/512/1580/1580750.png';
const Terminal = 'https://cdn-icons-png.flaticon.com/512/3342/3342136.png';


const internalExternalFacilitiesNames = [
      {
        "originalExternalEquipmentName": "ABU_FS1",
        "externalEquipmentName": "ABU_FS1",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "ABU_FS2",
        "externalEquipmentName": "ABU_FS2",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "ABU_FS3",
        "externalEquipmentName": "ABU_FS3",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "ABU_FS4",
        "externalEquipmentName": "ABU_FS4",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "ABU_FS5",
        "externalEquipmentName": "ABU_FS5",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "ABU_FS6",
        "externalEquipmentName": "ABU_FS6",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "ABU_FS7",
        "externalEquipmentName": "ABU_FS7",
        "internalEquipmentName": "Flow Station",
        "equipmentType": "Flow Station",
        "productionEquipmentType": "flowstation",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "Dehydration_Unit",
        "externalEquipmentName": "Dehydration_Unit",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "dehydrationUnit",
        "image": DehydrationUnit
      },
      {
        "originalExternalEquipmentName": "FCOT",
        "externalEquipmentName": "FCOT",
        "internalEquipmentName": "Oil Asset",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "terminal",
        "image": Terminal
      },
      {
        "originalExternalEquipmentName": "Gas_Customer_1",
        "externalEquipmentName": "Gas_Customer_1",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasDemand",
        "image": GasDemand
      },
      {
        "originalExternalEquipmentName": "Gas_Customer_2",
        "externalEquipmentName": "Gas_Customer_2",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasDemand",
        "image": GasDemand
      },
      {
        "originalExternalEquipmentName": "Gas_Pipeline_1",
        "externalEquipmentName": "Gas_Pipeline_1",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Gas_Pipeline_2",
        "externalEquipmentName": "Gas_Pipeline_2",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Gas_Pipeline_2a",
        "externalEquipmentName": "Gas_Pipeline_2a",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Gas_Pipeline_3",
        "externalEquipmentName": "Gas_Pipeline_3",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Gas_Pipeline_4",
        "externalEquipmentName": "Gas_Pipeline_4",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Gas_Pipeline_5",
        "externalEquipmentName": "Gas_Pipeline_5",
        "internalEquipmentName": "Gas Asset",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "gasPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Oil_Pipeline_1",
        "externalEquipmentName": "Oil_Pipeline_1",
        "internalEquipmentName": "Oil Asset",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "oilPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Oil_Pipeline_2",
        "externalEquipmentName": "Oil_Pipeline_2",
        "internalEquipmentName": "Oil Asset",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "oilPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Oil_Pipeline_3",
        "externalEquipmentName": "Oil_Pipeline_3",
        "internalEquipmentName": "Oil Asset",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "oilPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Oil_Pipeline_4",
        "externalEquipmentName": "Oil_Pipeline_4",
        "internalEquipmentName": "Oil Asset",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "oilPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "Oil_Pipeline_5",
        "externalEquipmentName": "Oil_Pipeline_5",
        "internalEquipmentName": "Oil Asset",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "oilPipeline",
        "image": Pipeline
      },
      {
        "originalExternalEquipmentName": "REO_ABU_CPF_1",
        "externalEquipmentName": "REO_ABU_CPF_1_Liquid",
        "internalEquipmentName": "centralProcessingFacility",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": CentralProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_ABU_CPF_1",
        "externalEquipmentName": "REO_ABU_CPF_1_Gas",
        "internalEquipmentName": "centralProcessingFacility",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": GasProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_ABU_CPF_1_&_2",
        "externalEquipmentName": "REO_ABU_CPF_1_&_2_Liquid",
        "internalEquipmentName": "centralProcessingFacility",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": CentralProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_ABU_CPF_1_&_2",
        "externalEquipmentName": "REO_ABU_CPF_1_&_2_Gas",
        "internalEquipmentName": "centralProcessingFacility",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": GasProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_CPF",
        "externalEquipmentName": "REO_CPF_Liquid",
        "internalEquipmentName": "centralProcessingFacility",
        "equipmentType": "Oil Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": CentralProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_CPF",
        "externalEquipmentName": "REO_CPF_Gas",
        "internalEquipmentName": "centralProcessingFacility",
        "equipmentType": "Gas Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": GasProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_CPF_AGG",
        "externalEquipmentName": "REO_CPF_AGG",
        "internalEquipmentName": "AG Asset",
        "equipmentType": "AG Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": GasProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_CPF_NAG",
        "externalEquipmentName": "REO_CPF_NAG",
        "internalEquipmentName": "NAG Asset",
        "equipmentType": "NAG Asset",
        "productionEquipmentType": "centralProcessingFacility",
        "image": GasProcessingFacility
      },
      {
        "originalExternalEquipmentName": "REO_GP1",
        "externalEquipmentName": "REO_GP1",
        "internalEquipmentName": "Gas Plant",
        "equipmentType": "Gas Plant",
        "productionEquipmentType": "gasProcessingFacility",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "REO_GP2",
        "externalEquipmentName": "REO_GP2",
        "internalEquipmentName": "Gas Plant",
        "equipmentType": "Gas Plant",
        "productionEquipmentType": "gasProcessingFacility",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "REO_GP3",
        "externalEquipmentName": "REO_GP3",
        "internalEquipmentName": "Gas Plant",
        "equipmentType": "Gas Plant",
        "productionEquipmentType": "gasProcessingFacility",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "REO_GP4",
        "externalEquipmentName": "REO_GP4",
        "internalEquipmentName": "Gas Plant",
        "equipmentType": "Gas Plant",
        "productionEquipmentType": "gasProcessingFacility",
        "image": Flowstation
      },
      {
        "originalExternalEquipmentName": "REO_GP5",
        "externalEquipmentName": "REO_GP5",
        "internalEquipmentName": "Gas Plant",
        "equipmentType": "Gas Plant",
        "productionEquipmentType": "gasProcessingFacility",
        "image": Flowstation
      }
    ];

const getEquipmentImage = (node) => {
  // Default image/shape
  let image = Flowstation;

  for (const item of internalExternalFacilitiesNames) {
    if (item.originalExternalEquipmentName === node) {
      return item.image || Flowstation; // fall back if image property is missing
    }
  }

  return image;
};

// { id: 'ABU_FS1', label: 'ABU_FS1', x: 500, y: -200, color: '#3498db', shape: 'image', image: Flowstation, font: { size: 16, color: 'black' } },

export const getUniqueNodesEquipments = () => {

    // Assuming equipmentConnections is already defined as in your data
    const nodeKeys = Object.keys(equipmentConnections[0]);

    const uniqueNodes = nodeKeys.reduce((acc, key) => {
    // Create a Set to remove duplicates, then spread back into an array
    acc[key] = [...new Set(equipmentConnections.map(item => item[key]))];
    return acc;
    }, {});

    return { nodeKeys, uniqueNodes };
}

const linspace = (start, end, n) => {
  if (n === 1) return [start]; // edge case
  const step = (end - start) / (n - 1);
  return Array.from({ length: n }, (_, i) => start + i * step);
}



export const getSurfaceNodes = () => {

    const XLayout = 2000;
    const YLayout = 1000;
    const XStart = 0;
    const YStart = 0;

    const surfaceNodes = [];

    const { nodeKeys, uniqueNodes } = getUniqueNodesEquipments();

    const xPoints = linspace(XStart, XLayout, nodeKeys.length);

    nodeKeys.forEach((nodeKey, i) => {
        const nodes = uniqueNodes[nodeKey];
        if (!nodes || nodes.length === 0) return;

        const yPoints = linspace(YStart, YLayout, nodes.length);

        nodes.forEach((node, j) => {

            if(!node) return;

            const surfaceNodeIdx = surfaceNodes.findIndex(_surfaceNodes => _surfaceNodes.id == node);

            if(surfaceNodeIdx < 0){

                const image = getEquipmentImage(node);

                surfaceNodes.push({
                    id: node,
                    label: node,
                    x: xPoints[i],
                    y: yPoints[j],
                    color: '#3498db',
                    shape:'image', 
                    image,
                    font: {
                    size: 16,
                    color: 'black'
                    }
                });
            }else{
                //const idx = surfaceNodes.length - 1;
                surfaceNodes[surfaceNodeIdx].x = xPoints[i];
                surfaceNodes[surfaceNodeIdx].y = yPoints[j];
            }
        });
  });


   return surfaceNodes;
}


export const getConnections = () => {

    const connections = [];

    equipmentConnections.forEach((equipmentsConnection) => {

        const nodeKeys = Object.keys(equipmentsConnection);

        nodeKeys.forEach((nodeKey, j) => {

            if(!nodeKey) return;

            if(j > 0){
                const previousNode = nodeKeys[j-1];
                connections.push({
                    from: equipmentsConnection[previousNode], 
                    to: equipmentsConnection[nodeKey],
                })
            }
        });
    });

  return connections;
}



